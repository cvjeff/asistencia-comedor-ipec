<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Control de Asistencia con QR</title>

  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .tabs { display: flex; gap: 10px; margin-bottom: 15px; }
    .tab { padding: 10px 15px; cursor: pointer; border: 1px solid #ccc; border-bottom: none; background: #eee; border-radius: 5px 5px 0 0; }
    .tab.active { background: white; font-weight: bold; border-bottom: 1px solid white; }
    .tab-content { border: 1px solid #ccc; padding: 15px; border-radius: 0 5px 5px 5px; background: white; }
    .hidden { display: none; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    button { cursor: pointer; padding: 5px 10px; margin: 3px 0; }
    input[type="text"], select, input[type="file"] { padding: 5px; margin: 5px 0; width: 100%; box-sizing: border-box; }
    label { font-weight: bold; display: block; margin-top: 10px; }
    #reader { width: 100%; max-width: 400px; margin: 0 auto; }
    #editForm { margin-top: 15px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; background: #f9f9f9; }
  </style>

  <!-- Librer√≠as necesarias -->
  <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

</head>
<body>

  <h1>Control de Asistencia con QR</h1>

  <div class="tabs">
    <div class="tab active" data-tab="asistencia">Registrar Asistencia</div>
    <div class="tab" data-tab="estudiantes">Administrar Estudiantes</div>
    <div class="tab" data-tab="reportes">Reportes de Asistencia</div>
  </div>

  <div id="asistencia" class="tab-content">
    <h2>Escanee el c√≥digo QR del estudiante</h2>
    <div id="reader"></div>
  </div>

  <div id="estudiantes" class="tab-content hidden">
    <h2>Cargar Estudiantes</h2>

    <label for="csvInput">Cargar CSV de estudiantes (cedula,nombre_completo,area_academica,nivel):</label>
    <input type="file" id="csvInput" accept=".csv" />
    <button id="btnCargarCSV">Cargar CSV</button>

    <h3>Agregar Estudiante Manualmente</h3>
    <label for="manualCedula">C√©dula:</label>
    <input type="text" id="manualCedula" />
    <label for="manualNombre">Nombre completo:</label>
    <input type="text" id="manualNombre" />
    <label for="manualArea">√Årea acad√©mica:</label>
    <input type="text" id="manualArea" />
    <label for="manualNivel">Nivel:</label>
    <input type="text" id="manualNivel" />
    <button id="btnAgregarManual">Agregar estudiante</button>

    <hr/>

    <label for="filtroCedula">Filtrar estudiantes por c√©dula:</label>
    <input type="text" id="filtroCedula" />
    <button id="btnFiltrar">Filtrar</button>

    <h3>Estudiantes Registrados</h3>
    <button id="btnGenerarQR">üìÑ Generar QR para impresi√≥n (PDF)</button>
    <table>
      <thead>
        <tr>
          <th>C√©dula</th>
          <th>Nombre completo</th>
          <th>√Årea acad√©mica</th>
          <th>Nivel</th>
          <th>Editar</th>
        </tr>
      </thead>
      <tbody id="tblEstudiantes"></tbody>
    </table>

    <form id="editForm" class="hidden">
      <h3>Editar Estudiante</h3>
      <label for="editCedula">C√©dula (no editable):</label>
      <input type="text" id="editCedula" readonly />
      <label for="editNombre">Nombre completo:</label>
      <input type="text" id="editNombre" />
      <label for="editArea">√Årea acad√©mica:</label>
      <input type="text" id="editArea" />
      <label for="editNivel">Nivel:</label>
      <input type="text" id="editNivel" />
      <button type="button" onclick="guardarEdicion()">Guardar</button>
      <button type="button" onclick="cancelarEdicion()">Cancelar</button>
      <button type="button" onclick="eliminarEstudiante()">Eliminar estudiante</button>
    </form>
  </div>

  <div id="reportes" class="tab-content hidden">
    <h2>Reportes de Asistencia</h2>
    <label for="reporteCedula">Buscar reporte por c√©dula:</label>
    <input type="text" id="reporteCedula" />
    <button id="btnBuscarReporte">Buscar</button>

    <table>
      <thead>
        <tr>
          <th>C√©dula</th>
          <th>Nombre completo</th>
          <th>D√≠as asistidos</th>
          <th>Fechas</th>
        </tr>
      </thead>
      <tbody id="tblReportes"></tbody>
    </table>
  </div>

  <script type="module" src="app.js"></script>

</body>
</html>
